## Use Case: Undestanding and Tuning the Job Executor

There is suspicion that a delay exists in executing Async wait. Based on the observation that when Async is added to process the latency of the process is increased.

We don't know exactly where the delay occurs. 

*Assuming it is in the Job Execution pipe line.*

Steps to debug


=== Check if Job is available for aquisition
* Check *DUE_DATE_ != future_date, RETRIES_   > 0, SUSPENDED_ = false*


=== Check for jobs piling up ???check what and where???
* job execution consumption

=== Check Job Acquisition through-put
* if the job acquisition query can get for one job in one second, our throughput is limited to 60 jobs per minute.
* Increase the number of jobs acquired with every query. Often the performance of the query does not depend on the number of jobs selected. Set the job executor configuration property maxJobsPerAcquisition to a higher value.

=== Check Job acquisition polling {{ACT_RU_JOB}}.
* Ensure a job is only acquired once, acquisition sets a time-based lock in the database*

* Make sure the timeouts are adequate to allow the job acquisition time to acquire the job.

* Inspect the table {{ACT_RU_JOB}}. If a job’s {{LOCK_EXP_TIME_}} and {{LOCK_OWNER_}} fields are empty, it has not been picked up by job acquisition.

* If you produce jobs at a higher rate than the job executor can consume them, then jobs pile up. Consider adding more processing resources (e.g., by increasing the job execution thread pool or setting up a second job executor).

 

 



### Architecture

When using Async activities with Camunda the Job Executor comes into play. Timers and Async Continuations affect the performance of the process. We can sometimes attribute latency to the delay in execution of jobs.

https://camunda.com/blog/2019/10/job-executor-what-is-going-on-in-my-process-engine/[Whats Going on in my process]

https://docs.camunda.org/manual/7.13/user-guide/process-engine/the-job-executor[Job Executor Docs]

https://docs.camunda.org/manual/7.10/reference/deployment-descriptors/tags/job-executor/#job-executor-configuration-properties[Job Executor Configs and Defaults]