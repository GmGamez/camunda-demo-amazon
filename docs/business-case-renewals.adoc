## Business Case: Renewals

Renewal use-case allows agents to manage renewal process through email. A company may manage hundreds of renewals which will come up for renewal at different times during the year. The renewal process will need to start well before the renewal has elapsed to make sure there is time to reassign the resource.

A deadline must be set to ensure the resource will be available as soon as possible if the current user does not want to renew the resource. The current user must be given multiple chances to renew up to the deadline.

It's necessary to track the communication sent to the user by the manager and system and responses from the user so it's easy and efficient for the manager to track the state of the renewal.

image:./images/lease-renewal.png[Renewal BPMN]

IMPORTANT: Running the app once with no profile is necessary. Do to a bug when initalizing the Camunda schema and the custom entities. Before running the renewal profile run the following.

```
mvn spring-boot:run
```

## Running the use-case

**Profiles** can be specified at the command line when the application starts. The notation is as follows. `-Dspring.profiles.active=dev,renewals`

Or you can use the application.properties file to specify the profile.

```yaml
spring.profiles.active: dev,renewal
```

### Loading Data

To load some default data use the URL

`http://<server>:<port>/renewals/start`

or use the postman collection `Camunda-PoC-Starter-Renewals.postman_collection.json` in the `postman` folder.

### See it running
**Visit `http://<server>:<port>/renewals` to access the React app.**


## Architecture

**_more to come ..._**

#### ReactJS UI Integration

The Maven frontend-maven-plugin configured in pom.xml is used to build the ReactJS app. The plugin creates a bundle.js file which ends up in `src/main/resources/static/built/bundle.js`. The static directory makes static resources such as JS and HTML available to the java app.

The Java application boot-straps the ReactJS App through Thymeleaf a java/spring frontend framework. The templates directory `src/main/resources/templates/app.html` has a HTML file app.html which calls the React app through a `<script />` tag loading the HTML into the react div `<div id="react"></div>`

Thymeleaf ties the Java frontend together using a Spring controller. `src/main/java/com/camunda/react/starter/controller/HomeController.java`. Mapping the app context to /home and calling the app.html.

The React Components are organized under the `src\main\js\reactjs` folder into a use-case folder then subdivided by component. Webpack and package.json define the structure and dependencies for the React App that allow node to build the app into the bundle.js which is later placed in the static directory as explained previously. 
